diff --git a/node_modules/@distube/yt-dlp/dist/index.js b/node_modules/@distube/yt-dlp/dist/index.js
index b17b126..a031871 100644
--- a/node_modules/@distube/yt-dlp/dist/index.js
+++ b/node_modules/@distube/yt-dlp/dist/index.js
@@ -125,8 +125,11 @@ var YtDlpPlugin = class extends import_distube.PlayableExtractorPlugin {
   static {
     __name(this, "YtDlpPlugin");
   }
-  constructor({ update } = {}) {
+  cookies = null;
+  constructor({ update, cookies } = {}) {
     super();
+    this.cookies = cookies || null;
+    console.log("[YtDlpPlugin] PATCHED VERSION v2 - cookies path:", this.cookies);
     if (update ?? true) download().catch(() => void 0);
   }
   init(distube) {
@@ -141,14 +144,18 @@ var YtDlpPlugin = class extends import_distube.PlayableExtractorPlugin {
     return true;
   }
   async resolve(url, options) {
-    const info = await json(url, {
+    // Always use cookies if available
+    const flags = {
       dumpSingleJson: true,
       noWarnings: true,
-      noCallHome: true,
-      preferFreeFormats: true,
       skipDownload: true,
-      simulate: true
-    }).catch((e2) => {
+      flatPlaylist: true,
+      ignoreNoFormatsError: true
+    };
+    if (this.cookies) {
+      flags.cookies = this.cookies;
+    }
+    let info = await json(url, flags).catch((e2) => {
       throw new import_distube.DisTubeError("YTDLP_ERROR", `${e2.stderr || e2}`);
     });
     if (isPlaylist(info)) {
@@ -171,18 +178,109 @@ var YtDlpPlugin = class extends import_distube.PlayableExtractorPlugin {
     if (!song.url) {
       throw new import_distube.DisTubeError("YTDLP_PLUGIN_INVALID_SONG", "Cannot get stream url from invalid song.");
     }
-    const info = await json(song.url, {
+    const cookiesPath = this.cookies || song.plugin?.cookies;
+    let info = null;
+    let lastError = null;
+
+    const baseFlags = {
       dumpSingleJson: true,
       noWarnings: true,
-      noCallHome: true,
-      preferFreeFormats: true,
       skipDownload: true,
-      simulate: true,
-      format: "ba/ba*"
-    }).catch((e2) => {
-      throw new import_distube.DisTubeError("YTDLP_ERROR", `${e2.stderr || e2}`);
-    });
+      ignoreNoFormatsError: true
+    };
+
+    const hasPlayable = (i) => i && i.formats?.some(f => f.url && !f.format_id?.startsWith('sb'));
+
+    // Strategy 1: cookies only
+    if (cookiesPath) {
+      console.log("[YtDlpPlugin] S1: cookies...");
+      info = await json(song.url, { ...baseFlags, cookies: cookiesPath }).catch((e) => {
+        console.log("[YtDlpPlugin] S1 fail:", e.stderr?.substring(0, 150) || e.message?.substring(0, 150));
+        lastError = e;
+        return null;
+      });
+      if (hasPlayable(info)) console.log("[YtDlpPlugin] S1 OK");
+    }
+
+    // Strategy 2: ios
+    if (!hasPlayable(info)) {
+      console.log("[YtDlpPlugin] S2: ios...");
+      info = await json(song.url, { ...baseFlags, extractorArgs: "youtube:player_client=ios" }).catch((e) => {
+        lastError = e;
+        return null;
+      });
+      if (hasPlayable(info)) console.log("[YtDlpPlugin] S2 OK");
+    }
+
+    // Strategy 3: web
+    if (!hasPlayable(info)) {
+      console.log("[YtDlpPlugin] S3: web...");
+      info = await json(song.url, { ...baseFlags, extractorArgs: "youtube:player_client=web" }).catch((e) => {
+        lastError = e;
+        return null;
+      });
+      if (hasPlayable(info)) console.log("[YtDlpPlugin] S3 OK");
+    }
+
+    // Strategy 4: tv_embedded
+    if (!hasPlayable(info)) {
+      console.log("[YtDlpPlugin] S4: tv_embedded...");
+      info = await json(song.url, { ...baseFlags, extractorArgs: "youtube:player_client=tv_embedded" }).catch((e) => {
+        lastError = e;
+        return null;
+      });
+      if (hasPlayable(info)) console.log("[YtDlpPlugin] S4 OK");
+    }
+
+    // Strategy 5: android + cookies
+    if (!hasPlayable(info) && cookiesPath) {
+      console.log("[YtDlpPlugin] S5: android+cookies...");
+      info = await json(song.url, { ...baseFlags, cookies: cookiesPath, extractorArgs: "youtube:player_client=android" }).catch((e) => {
+        lastError = e;
+        return null;
+      });
+      if (hasPlayable(info)) console.log("[YtDlpPlugin] S5 OK");
+    }
+
+    // Strategy 6: mweb
+    if (!hasPlayable(info)) {
+      console.log("[YtDlpPlugin] S6: mweb...");
+      info = await json(song.url, { ...baseFlags, extractorArgs: "youtube:player_client=mweb" }).catch((e) => {
+        lastError = e;
+        return null;
+      });
+      if (hasPlayable(info)) console.log("[YtDlpPlugin] S6 OK");
+    }
+
+    // Strategy 7: ios + cookies
+    if (!hasPlayable(info) && cookiesPath) {
+      console.log("[YtDlpPlugin] S7: ios+cookies...");
+      info = await json(song.url, { ...baseFlags, cookies: cookiesPath, extractorArgs: "youtube:player_client=ios" }).catch((e) => {
+        lastError = e;
+        return null;
+      });
+      if (hasPlayable(info)) console.log("[YtDlpPlugin] S7 OK");
+    }
+    if (!info) {
+      throw new import_distube.DisTubeError("YTDLP_ERROR", `${lastError?.stderr || lastError?.message || lastError}`);
+    }
     if (isPlaylist(info)) throw new import_distube.DisTubeError("YTDLP_ERROR", "Cannot get stream URL of a entire playlist");
+    console.log("[YtDlpPlugin] info.url:", info.url ? "exists" : "undefined");
+    console.log("[YtDlpPlugin] Total formats:", info.formats?.length || 0);
+    console.log("[YtDlpPlugin] All format IDs:", info.formats?.map(f => f.format_id).join(", ") || "none");
+    if (!info.url) {
+      const playableFormats = info.formats?.filter(f => f.url && !f.format_id?.startsWith('sb')) || [];
+      console.log("[YtDlpPlugin] Playable formats (non-storyboard):", playableFormats.length);
+      console.log("[YtDlpPlugin] Playable format details:", playableFormats.map(f => ({ id: f.format_id, acodec: f.acodec, vcodec: f.vcodec, hasUrl: !!f.url })));
+      const format = playableFormats.find(f => f.acodec && f.acodec !== 'none')
+        || playableFormats.find(f => f.acodec !== 'none' || f.vcodec !== 'none')
+        || playableFormats[0];
+      if (format?.url) {
+        console.log("[YtDlpPlugin] Selected format:", format.format_id);
+        return format.url;
+      }
+      throw new import_distube.DisTubeError("YTDLP_ERROR", "No playable format found - cookies may be expired");
+    }
     return info.url;
   }
   getRelatedSongs() {
